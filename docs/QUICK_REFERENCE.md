# ⚡ Краткая памятка

## Порядок улучшений

```
Волна 1: Фундамент          Волна 2: Ошибки
├── #1 Ротация логов        ├── #14 Валидация конфига
├── #2 Single-instance      ├── #15 Атомарное сохранение
└── #5 Graceful shutdown    ├── #3 Ошибки микрофона
                            └── #4 Reconnect

Волна 3: Базовый UX         Волна 4: Производительность
├── #9 Toast-уведомления    ├── #12 chunk_size → 8000
├── #6 Звуковая связь       └── #11 VAD фильтр
└── #7 Индикатор загрузки

Волна 5: Расширенный UX     Волна 6: Настройки
├── #8 Выбор микрофона      ├── #17 Автозапуск
├── #10 Анимация трея       ├── #16 Окно настроек
└── #19 Tooltip             └── #18 Статистика

Волна 7: Модели             Волна 8: Полировка UI
├── #20 Скачивание моделей  └── #22 Простой UI настроек
└── #21 Гибридная загрузка

Волна 9: Документация       Волна 10: v1.0.1 ✅ ГОТОВО
├── #13 MODEL_OPTIMIZATION  ├── #23 Туториал ✅
└── README обновление       ├── #24 Автообновление ✅
                            ├── #25 Hold mode ✅
                            ├── #26 Баг настроек ✅
                            └── #27 Инсталлятор ✅
```

## Критичные правила

| ❌ Нельзя | ✅ Нужно |
|----------|---------|
| Пропускать чек-боксы | Проверять ВСЕ пункты |
| Смешивать улучшения | Одно улучшение = один коммит |
| Переходить без тестов | Регрессия после каждой волны |
| Игнорировать ошибки | Фиксить сразу |

## Файлы по улучшениям

| # | Улучшение | Основной файл | Новые файлы | Статус |
|---|-----------|---------------|-------------|--------|
| 1 | Ротация логов | main.py | - | ⏳ |
| 2 | Single-instance | main.py | - | ⏳ |
| 3 | Ошибки микрофона | audio_capture.py | - | ⏳ |
| 4 | Reconnect | audio_capture.py | - | ⏳ |
| 5 | Graceful shutdown | main.py | - | ⏳ |
| 6 | Звуковая связь | main.py | audio_feedback.py | ⏳ |
| 7 | Индикатор загрузки | system_tray.py | - | ⏳ |
| 8 | Выбор микрофона | audio_capture.py, main.py | - | ⏳ |
| 9 | Toast-уведомления | main.py | notifications.py | ⏳ |
| 10 | Анимация трея | system_tray.py | - | ⏳ |
| 11 | VAD | main.py | vad.py | ⏳ |
| 12 | chunk_size | config.py | - | ⏳ |
| 14 | Валидация конфига | config.py | - | ⏳ |
| 15 | Атомарное сохранение | config.py | - | ⏳ |
| 16 | Окно настроек | main.py | - | ⏳ |
| 17 | Автозапуск | main.py | autostart.py | ⏳ |
| 18 | Статистика | main.py | statistics.py | ⏳ |
| 19 | Tooltip | system_tray.py | - | ⏳ |
| 20 | Скачивание моделей | main.py | model_manager.py | ⏳ |
| 21 | Гибридная загрузка | main.py, speech_recognition.py | - | ⏳ |
| 22 | Простой UI | main.py | - | ⏳ |
| **23** | **Туториал** | **main.py** | **first_run.py** | ✅ |
| **24** | **Автообновление** | **main.py** | **updater.py** | ✅ |
| **25** | **Hold mode** | **main.py, hotkey_manager.py** | - | ✅ |
| **26** | **Баг настроек** | **main.py** | - | ✅ |
| **27** | **Инсталлятор** | **installer.iss** | **build_installer.bat** | ✅ |

## Новые зависимости

```txt
# Добавить в requirements.txt после Волны 3-4:
win11toast>=0.34      # Волна 3: Toast-уведомления
webrtcvad>=2.0.10     # Волна 4: VAD
```

## Быстрые команды

```bash
# Проверить что всё работает
python src/main.py

# Собрать exe
build.bat

# Тест после сборки
dist\VoiceInput.exe
```

## Регрессионный чек-лист

После каждой волны:
- [ ] Запуск работает
- [ ] Распознавание работает
- [ ] Текст вставляется
- [ ] Выход работает
- [ ] Повторный запуск работает

## Если сломалось

```bash
# Откатить последние изменения
git checkout -- .

# Или вернуться к последнему рабочему коммиту
git log --oneline  # Найти хороший коммит
git checkout <commit-hash>
```
